<div class="collection-cascade" data-collection-cascade>
  <div class="items">
    <div class="item-sizer"></div>
    <div class="column-sizer"></div>

    {% assign col_count_desktop = 1 %}
    {% for product in collection.products %}
      {% assign block_width_mobile = 'full' %}
      {% assign block_width_desktop = 'half' %}
      {% capture mobile_count %}{% cycle '1', '2' %}{% endcapture %}

      {%- if forloop.index == 3 -%}
        {%- assign block_width_desktop = 'full' -%}
      {%- else -%}
        {%- assign block_width_desktop = 'half' -%}
      {%- endif -%}

      <div class="item item--desktop--{{ block_width_desktop }} item--desktop--{{ block_width_desktop }}--no-padding item--mobile--full {% if forloop.first %}item--first{% endif %} {% if last_col %}item--last{% endif %} {% if fade_in %}fade-in{% endif %}">
        <div class="item__inner {% if col_count_desktop == 2 or col_count_desktop == 3 %}lg--up--five-sixths lg--up--mx--auto{% endif %}">
          {% include 'product-grid-item', text_color: section.settings.section_color %}
        </div>
      </div>

      {% assign col_count_desktop = col_count_desktop | plus: 1 %}
      {% if col_count_desktop == 5 %}
        {% assign col_count_desktop = 1 %}
      {% endif %}
    {% endfor %}
    
  </div>
</div>